query-table:: false
#+BEGIN_QUERY
{:title "Task [[page]] counts — 20250818  to 20250825"
 :query
 [:find ?task (count ?b)
  :in $ ?start ?end
  :where
  ;; journal date window
  [?b :block/page ?pg]
  [?pg :page/journal? true]
  [?pg :page/journal-day ?d]
  [(<= ?start ?d)] [(<= ?d ?end)]
  ;; page refs like [[製作遊戲]] / [[MPC研究]]
  [?b :block/refs ?ref]
  [?ref :page/name ?task]]
 :inputs [20250826 20250901]  ;; start (7 days ago), end (today)
 :result-transform (fn [rows]
                     (->> rows (sort-by second >)))}
#+END_QUERY

- query-table:: false
  #+BEGIN_QUERY
  {:title "Task [[page]] counts — 20250818  to 20250825"
   :query
   [:find ?task (count ?b)
    :in $ ?start ?end
    :where
    ;; journal date window
    [?b :block/page ?pg]
    [?pg :page/journal? true]
    [?pg :page/journal-day ?d]
    [(<= ?start ?d)] [(<= ?d ?end)]
    ;; page refs like [[製作遊戲]] / [[MPC研究]]
    [?b :block/refs ?ref]
    [?ref :page/name ?task]]
   :inputs [20250818 20250825]  ;; start (7 days ago), end (today)
   :result-transform (fn [rows]
                       (->> rows (sort-by second >)))}
  #+END_QUERY
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-